<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>변수와 자료형</title>
</head>

<body>
    <h1>변수와 자료형</h1>
    <h2>변수 선언시 var 뿐만 아니라 let, const 를 이용하여 선언 가능</h2>

    <h3>* var, let, const의 차이점</h3>

    <h4>1) 변수 선언 방법</h4>
    <button onclick="diffDeclare();">클릭</button>


    <h4>2) 스코프(사용 가능한 범위) </h4>
    <button onclick="diffScope();">클릭</button>

    <script>
        function diffDeclare() {
            // 1) var : 중복선언 가능(단점)
            var userId = "user01";
            console.log(userId);
            var userId = "user02";
            console.log(userId);
            // 오류 발생 x 

            userId = "user03"; // 재할당 가능
            console.log(userId);

            console.log("-------------------------------");

            // 2) let : 중복선언 불가 
            let userPw = "pass01";
            console.log(userPw);
            // let userPw = "pass02"  중복선언 불가

            userPw = "pass03";
            console.log(userPw); // 재할당 가능


            console.log("-------------------------------");

            // 3) const : 중복선언 불가, 재할당 불가 (프로그램의 상수 개념)
            const user = "user01";
            console.log(user);

            // const user = "user02";

            // user = "user03"; // 재할당불가 출력시 오류
            console.log(user);

            /*
                - var 은 자유롭게 변수선언, 사용할 수 있다는 장점이 있지만 
                - 중복된 변수가 남발할 수 있고 의도치 않게 값이 변경이 될 수도 있음 => 가장 큰 단점 
                => 보완하여 나온것이 let, const 임
                   권장사항 : let, const 위주로 사용
                

            */

        }

        function diffScope() {
            // 1) var : function scope => 변수가 선언된 "함수 영역" 내에서 사용가능
            var name = "한빛나";
            console.log(name);

            if (true) {
                var age = 20;
            }

            console.log(age); // 실행가능

            for (var i = 0; i < 3; i++) {

            }
            console.log(i); //출력됨

            console.log("-------------------------------");

            // 2) let , const : block scope => 변수가 선언된 "블럭{}" 내에 서만 사용 가능/ 다른프로그램 
            if (true) {
                let hobby = "운동";
                const gender = "M";
            }
            // console.log(hobby);
            // console.log(gender);
            // 실행불가능

            // for (let i = 0; i < 3; i++) {

            // }
            // console.log(i); //출력안됨

            console.log("-------------------------------");
        }
    </script>

    <h3>* 변수 선언 위치에 따른 전역변수 / 지역변수</h3>

    <script>
        /*
        // window.onload 이 문서가 다 로딩된 후 바로 실행시키고자 할 때
                window.onload = function () {
                    console.log("문서로딩 완료")
                }
        */

        // 특정 함수영역 밖에 선언된 변수는 전역변수로 잡힘 
        var declareVar = "var 전역변수";
        let declareLet = "let 전역변수";
        const declareConst = "const 전역변수";
        declareNone = "그냥 전역변수"; // 변수명 앞에 아무런 키워드가 없으면 전역변수임.

        window.onload = function () {
            // console.log(declareVar);
            // console.log(declareLet);
            // console.log(declareConst);
            // console.log(declareNone);
            // 밑에 지역변수 선언전에 출력하고자 하기에 오류 발생

            // 전역변수와 동일한 이름으로 지역변수 선언
            var declareVar = "var 지역변수";
            let declareLet = "let 지역변수";
            const declareConst = "const 지역변수";

            console.log(declareVar);
            console.log(declareLet);
            console.log(declareConst);
            // 지역변수로 호출

            // 전역변수에 접근하고 싶다면 => window. 또는 this. 으로 접근(var만 가능)
            console.log(window.declareVar);
            console.log(this.declareNone);
            // 잘나옴
            console.log(window.declareLet);
            console.log(window.declareConst);
            // let, const => undefined로 나옴

            declareInner = "애는 뭘까?"; // 전역변수
            console.log(declareInner);
            console.log(this.declareInner);
            // 둘다 잘 나옴 -> 전역변수

            test(); // 잘 출력됨 전역변수라서
        }

        function test() {
            console.log("========================================================")
            console.log(declareInner);
        }

    </script>

    <hr>

    <h2>자료형</h2>
    <p>
        Dynamic Type : 변수 선언시 자료형이 별도로 지정하지 않음(그렇다고 자료형이 없는거 아님)
        => 대입되는 값에 의해 타입 결정됨
    </p>

    <h2>자바스크립트의 자료형</h2>
    <ul>
        <li>string(문자열)</li>
        <li>number(숫자) </li>
        <li>boolean(논리) </li>
        <li>object(객체) </li>
        <li>function(함수) </li>
        <li>undefined(초기화가 안된 변수) </li>
    </ul>

    <button onclick="typeTest();">자료형 테스트</button>
    <div id="area1"></div>

    <script>
        function typeTest() {
            const name = "더조은";
            const age = 20;
            const flag = true;
            const hobby = ['영화', '음악', '낮잠']; //배열 객체
            const divEle = document.querySelector("#area1"); // 요소 객체
            const user = {                  // 객체 생성 
                name: '이한나',
                age: 25,
                id: 'user01'
            };

            const fn = function () {
                alert('함수자료형')
            }

            let noVal;

            console.log("-------------------------------------")

            // 자료형 확인 : typeof 변수명
            console.log(typeof name, name)
            console.log(typeof age, age)
            console.log(typeof flag, flag)
            console.log(typeof hobby, hobby)
            console.log(typeof divEle, divEle)
            console.log(typeof user, user)
            console.log(typeof fn, fn)
            console.log(typeof noVal, noVal)

            // div 화면에 출력
            divEle.innerHTML = "";
            divEle.innerHTML += typeof name + ", " + name + " <br>"
            divEle.innerHTML += typeof age + ", " + age + " <br>"
            divEle.innerHTML += typeof flag + ", " + flag + " <br>"
            divEle.innerHTML += typeof hobby + ", " + hobby + " <br>"
            divEle.innerHTML += typeof divEle + ", " + divEle + " <br>"
            divEle.innerHTML += typeof user + ", " + user + " <br>"
            divEle.innerHTML += typeof fn + ", " + fn + " <br>"
            divEle.innerHTML += typeof noVal + ", " + noVal + " <br>"

            // 백틱 (ES6 버전부터 사용 가능)
            let name1 = '이름 '
                + '홍길동';
            let name2 = `이름
                    홍길동`;

            let str = 'Hello' + name2;
            let str1 = `Hello  ${name2}`;

            // 기존 + 넣는 방식보다 
            // 만들기 편해짐 
            let ta = `<table>
                        <tr>
                            <td>a</td>
                        </tr>
                        <tr>
                            <td>b</td>
                        </tr>
                    </table>
                            `;
            let string = `${typeof name}, ${name}<br> 
                            ${typeof age}, ${age}<br>
                            ${typeof flag}, ${flag}<br>
                            ${typeof hobby}, ${hobby}<br>
                            ${typeof divEle}, ${divEle}<br>
                            ${typeof user}, ${user}<br>
                            ${typeof fn}, ${fn}<br>
                            ${typeof noVal}, ${noVal}<br>
                            `;
            divEle.innerHTML += "<br>백틱을 사용한 추가<br>" + string;
        }
    </script>
</body>

</html>